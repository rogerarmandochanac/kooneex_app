<ViajeScreen>:
    name: "viaje"

    FloatLayout:

        MDLabel:
            text: "Solicitar viaje"
            halign: "center"
            font_style: "H5"
            bold: True
            theme_text_color: "Custom"
            text_color: 0.9686, 0.5765, 0.1176, 1
            size_hint_y: None
            height: dp(48)
            pos_hint: {"top": 1}

        # --- CONTENIDO ---
        MDBoxLayout:
            orientation: 'vertical'
            padding: dp(20), dp(60), dp(20), dp(10)  # deja espacio al título
            spacing: dp(10)
            size_hint: 1, None
            height: self.minimum_height
            pos_hint: {"top": 0.92}

            MDTextField:
                id: txt_origen
                hint_text: "Origen definido automaticamente"
                on_text: root.buscar_direccion(self.text, "origen")
                disabled: True

            MDTextField:
                id: txt_destino
                hint_text: "Selecciona el destino"
                readonly: True
                on_focus: if self.focus: root.abrir_lista_destinos()

            MDTextField:
                id: txt_cantidad_pasajeros
                hint_text: "No. Pasajeros"
                text: "1"

            MDBoxLayout:
                size_hint_y: None
                height: "140dp"
                orientation: "vertical"

                MDTextField:
                    id: txt_referencia
                    hint_text: "Referencia (ej. casa azul, portón negro)"
                    multiline: True
                    size_hint_y: 1

        # --- BOTÓN ---
        MDFloatingActionButton:
            icon: "check"
            md_bg_color: 0, 0.7, 0, 1
            pos_hint: {"right": 0.95, "y": 0.05}
            on_release: root.solicitar_viaje()

        # --- MENSAJE ---
        MDLabel:
            id: mensaje_label
            text: root.mensaje
            halign: "center"
            size_hint_y: None
            height: dp(30)
            pos_hint: {"center_x": 0.5, "y": 0.01}
            theme_text_color: "Custom"
            text_color: 1, 1, 1, 1
