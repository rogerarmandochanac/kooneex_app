<PendienteItem>:
    orientation: "vertical"
    size_hint_y: None
    height: dp(250)
    padding: dp(15)
    radius: [14, 14, 14, 14]
    md_bg_color: 0.98, 0.97, 0.95, 1
    elevation: 0
    on_release: root.mostrar_referencia()

    BoxLayout:
        orientation: "horizontal"
        spacing: dp(10)

        MDBoxLayout:
            orientation: "vertical"
            spacing: dp(1)

            MDLabel:
                text: "[b]Usuario:[/b] {}".format(root.pasajero_nombre)
                markup: True

            MDLabel:
                text: "[b]Pasajeros:[/b] {}".format(root.cantidad_pasajeros)
                markup: True

            MDLabel:
                text: "[b]Tarifa sugerida:[/b] ${} MXN".format(root.costo_estimado)
                markup: True

            MDLabel:
                text: "[b]Distancia total:[/b] {} km".format(root.distancia_km)
                markup: True
            
            MDLabel:
                text: "[b]Referencia:[/b] {}".format(root.referencia)
                markup: True

                shorten: True
                shorten_from: "right"
                max_lines: 1

        FitImage:
            source: root.pasajero_foto or "assets/user_placeholder.png"
            size_hint: None, None
            size: dp(80), dp(80)
            radius: [40, 40, 40, 40]
            canvas.after:
                Color:
                    rgba: 0.9686, 0.5765, 0.1176, 1
                Line:
                    width: 1.5
                    rounded_rectangle: (self.x, self.y, self.width, self.height, 40)

    MDTextField:
        hint_text: "Tu tarifa"
        text: root.costo_estimado
        size_hint_y: None
        height: dp(50)
        on_text:
            root.costo_estimado = self.text

    Button:
        text: "Sugerir tarifa"
        size_hint_x: .5
        pos_hint: {"center_x": .5}
        size_hint_y: None
        height: dp(40)

        background_normal: ""
        background_down: ""
        background_color: 0, 0, 0, 0  # ðŸ”¥ MUY IMPORTANTE

        color: 1, 1, 1, 1  # texto blanco

        canvas.before:
            Color:
                rgba: (0.85, 0.45, 0.05, 1) if self.state == "down" else (0.9686, 0.5765, 0.1176, 1)
            RoundedRectangle:
                pos: self.pos
                size: self.size
                radius: [15, 15, 15, 15]

        on_release: root.sugerir()